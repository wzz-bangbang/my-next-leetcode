#### 前端虚环境
一般用 PR preview （Pull Request Preview = “这条 PR 的可访问预览环境”）
方案：每个 PR 自动构建并部署到独立子域名，页面会标注 PR/commit 信息。静态资源走 hash 长缓存，入口短缓存，避免缓存串。配置用运行时注入，默认连接 staging 后端，必要时配合 mock 或后端分支环境。安全上会加内网/鉴权，PR 合并或关闭后自动回收环境，控制成本。

实现：
- 每个分支/PR：构建出一份前端产物
- 部署到 CDN/静态托管
- 分配一个独立 URL，比如：
    - `https://preview-<pr>.xxx.com`
    - 或 `https://<branch>.preview.xxx.com`
- nginx需要按不同域名映射到不同目录


#### 访问后端虚环境

适用场景：前端通过“配置”把 API 请求切到某个后端临时域名（虚环境 / 临时分支域名）用于联调/回归。

实现：
- 提供一个设置入口，修改 apiBase
- 把 `apiBase` 存在：
    - localStorage（简单）
    - 或 cookie（配合代理更复杂）
    - 或页面内存
- 请求层每次从“配置源”取 base
- 切换后清理缓存或重新请求页面数据
- 需要对配置的入口做权限，以及校验 apiBase